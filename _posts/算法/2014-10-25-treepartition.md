---
layout: post
title: 树链剖分
category: 数据结构
tags: 树
keywords: 
description: 
---

###简介



最近打算要好好搞下数据结构了, 于是打算先从树链剖分开始. 其实树链剖分只是处理与树有关的问题的一种方式而已, 算不上是数据结构或者高级的算法. **实质上它就是把树上的链hash成一个个连续的区间, 然后用其它的合适的数据结构修改和维护这些区间(比如线段树), 以达到高效的进行各种操作目的**. 树的剖分有多种方式, 最常用的是按照树的轻重边划分(下文我会简要证明这种剖分方式的好处). 本文讲的也就是在这种方式.

###面临的问题



>在一棵树的路径上进行动态的修改,然后在路径上求极值,求和等等各种查询, 这是我们要解决的问题.



###剖分



####变量定义


>fa[u]: 表示u的父亲节点.

>size[u]: 表示以u为根的子树中节点的个数(包括u自身).

>son[u]: 表示u的子节点中size最大的那个节点.

>dep[u]: 表示u在深度优先搜索树中的深度.

>top[u]: 表示u所在链的的顶端节点(与u在一个链上且dep值最小的节点). 

>w[u]: 表示u节点在线段树中的位置(即被hash的编号).



####概念


>树链: 就是树上的路径. 

>剖分: 就是把路径分类为重链和轻链.

>重边: u与son[u]的连边(假设son[u]存在,即u不是叶子节点).

>轻边: u与除son[u]之外的连边.

>重链: 一条路径是重链当且仅当这条路径上所有的边都是重边







